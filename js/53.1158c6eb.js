"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[53],{5053:(e,n,o)=>{o.r(n),o.d(n,{default:()=>Q});var l=o(3673),t=o(2323);const s={class:"text-h6"},a=(0,l.Uk)(" К урокам "),i={key:0},c=(0,l.Uk)(" Выйти "),u=(0,l._)("div",{class:"text-h6"}," войти через ",-1),d=(0,l.Uk)(" гугл "),r=(0,l.Uk)(" Что сделать с материалом, созданным в гостевом аккаунте? "),g={class:"q-gutter-lg q-pa-lg"};function h(e,n,o,h,p,m){const v=(0,l.up)("q-btn"),w=(0,l.up)("q-page"),f=(0,l.up)("q-card-section"),_=(0,l.up)("q-card"),S=(0,l.up)("q-dialog"),k=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(w,{class:"column items-center q-pa-lg q-col-gutter-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",s," Привет, "+(0,t.zw)(e.user.name),1),(0,l._)("div",null,[(0,l.Wm)(v,{to:e.lessonsRoute},{default:(0,l.w5)((()=>[a])),_:1},8,["to"])]),e.user.socialId?((0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(v,{loading:e.isLoading,onClick:e.logout},{default:(0,l.w5)((()=>[c])),_:1},8,["loading","onClick"])])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[u,(0,l._)("div",null,[(0,l.Wm)(v,{loading:e.isLoading,onClick:e.login},{default:(0,l.w5)((()=>[d])),_:1},8,["loading","onClick"])])],64))])),_:1}),(0,l.Wm)(S,{modelValue:e.showHasLessonsModal,"onUpdate:modelValue":n[2]||(n[2]=n=>e.showHasLessonsModal=n)},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"column"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"text-h6 q-pa-lg"},{default:(0,l.w5)((()=>[r])),_:1}),(0,l._)("div",g,[(0,l.wy)((0,l.Wm)(v,{label:"Отмена"},null,512),[[k]]),(0,l.wy)((0,l.Wm)(v,{label:"Перенести",color:"secondary",onClick:n[0]||(n[0]=n=>e.changeAction("replace"))},null,512),[[k]]),(0,l.wy)((0,l.Wm)(v,{label:"Удалить",color:"red",onClick:n[1]||(n[1]=n=>e.changeAction("delete"))},null,512),[[k]])])])),_:1})])),_:1},8,["modelValue"])],64)}var p=o(1959),m=o(3863),v=o(829),w=o(238),f=o(9253),_=o(9582),S=o(9232),k=o(6912),C=o(2801),y=o(1768),L=function(e,n,o,l){function t(e){return e instanceof o?e:new o((function(n){n(e)}))}return new(o||(o=Promise))((function(o,s){function a(e){try{c(l.next(e))}catch(n){s(n)}}function i(e){try{c(l["throw"](e))}catch(n){s(n)}}function c(e){e.done?o(e.value):t(e.value).then(a,i)}c((l=l.apply(e,n||[])).next())}))};const E=(0,l.aZ)({name:"PageIndex",setup(){const e=(0,m.useStore)(),n=(0,_.tv)();e.dispatch(v.D.FETCH_USER);const o=(0,p.Fl)((()=>e.state.user)),l=(0,p.iH)(!1),t=(0,p.iH)(!1),{lessons:s}=e.state.lesson;window.addEventListener("message",(e=>{console.log("event",e)}));const a=()=>{window.open(`${y.baseURL}/auth/google`)},i=e=>L(this,void 0,void 0,(function*(){l.value=!0,yield C.Z.user.changeAction(e).catch((()=>{l.value=!1})),a()})),c=()=>L(this,void 0,void 0,(function*(){l.value=!0,yield e.dispatch(v.D.LOGOUT_USER).finally((()=>{l.value=!1})),yield n.push({name:f.n.LOGIN}),e.commit(w.F.SET_ACCESS_TOKEN,""),e.commit(S.N.SET_LESSONS,[])})),u=()=>L(this,void 0,void 0,(function*(){s.length||(yield e.dispatch(k.e.FETCH_LESSONS),e.state.lesson.lessons.length)?t.value=!0:a()})),d={name:f.n.LESSONS};return{user:o,logout:c,login:u,isLoading:l,lessonsRoute:d,showHasLessonsModal:t,changeAction:i}}});var q=o(4260),W=o(4379),H=o(2452),U=o(6818),Z=o(151),b=o(5589),O=o(677),x=o(7518),D=o.n(x);const N=(0,q.Z)(E,[["render",h]]),Q=N;D()(E,"components",{QPage:W.Z,QBtn:H.Z,QDialog:U.Z,QCard:Z.Z,QCardSection:b.Z}),D()(E,"directives",{ClosePopup:O.Z})}}]);