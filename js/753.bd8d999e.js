"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[753],{5753:(e,n,o)=>{o.r(n),o.d(n,{default:()=>R});var l=o(3673),t=o(2323);const a={class:"text-h6"},s=(0,l.Uk)(" К урокам "),i={key:0},c=(0,l.Uk)(" Выйти "),u=(0,l._)("div",{class:"text-h6"}," войти через ",-1),d=(0,l.Uk)(" гугл "),r=(0,l.Uk)(" Что сделать с материалом, созданным в гостевом аккаунте? "),g={class:"q-gutter-lg q-pa-lg"};function p(e,n,o,p,h,m){const v=(0,l.up)("q-btn"),f=(0,l.up)("q-page"),w=(0,l.up)("q-card-section"),_=(0,l.up)("q-card"),k=(0,l.up)("q-dialog"),S=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(f,{class:"column items-center q-pa-lg q-col-gutter-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",a," Привет, "+(0,t.zw)(e.user.name),1),(0,l._)("div",null,[(0,l.Wm)(v,{to:e.lessonsRoute},{default:(0,l.w5)((()=>[s])),_:1},8,["to"])]),e.user.socialId?((0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(v,{loading:e.isLoading,onClick:e.logout},{default:(0,l.w5)((()=>[c])),_:1},8,["loading","onClick"])])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[u,(0,l._)("div",null,[(0,l.Wm)(v,{loading:e.isLoading,onClick:e.login},{default:(0,l.w5)((()=>[d])),_:1},8,["loading","onClick"])])],64))])),_:1}),(0,l.Wm)(k,{modelValue:e.showHasLessonsModal,"onUpdate:modelValue":n[2]||(n[2]=n=>e.showHasLessonsModal=n)},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"column"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"text-h6 q-pa-lg"},{default:(0,l.w5)((()=>[r])),_:1}),(0,l._)("div",g,[(0,l.wy)((0,l.Wm)(v,{label:"Отмена"},null,512),[[S]]),(0,l.wy)((0,l.Wm)(v,{label:"Перенести",color:"secondary",onClick:n[0]||(n[0]=n=>e.changeAction("replace"))},null,512),[[S]]),(0,l.wy)((0,l.Wm)(v,{label:"Удалить",color:"red",onClick:n[1]||(n[1]=n=>e.changeAction("delete"))},null,512),[[S]])])])),_:1})])),_:1},8,["modelValue"])],64)}var h=o(1959),m=o(3863),v=o(829),f=o(238),w=o(9253),_=o(9582),k=o(9232),S=o(6912),y=o(2801),C=o(1768),L=o(8825),E=o(3437),Z=function(e,n,o,l){function t(e){return e instanceof o?e:new o((function(n){n(e)}))}return new(o||(o=Promise))((function(o,a){function s(e){try{c(l.next(e))}catch(n){a(n)}}function i(e){try{c(l["throw"](e))}catch(n){a(n)}}function c(e){e.done?o(e.value):t(e.value).then(s,i)}c((l=l.apply(e,n||[])).next())}))};const q=(0,l.aZ)({name:"PageIndex",setup(){const e=(0,m.useStore)(),n=(0,_.tv)(),o=(0,L.Z)();e.dispatch(v.D.FETCH_USER);const l=(0,h.Fl)((()=>e.state.user)),t=(0,h.iH)(!1),a=(0,h.iH)(!1),{lessons:s}=e.state.lesson,i=()=>{o.platform.is.cordova?cordova.InAppBrowser.open(`${C.baseURL}/auth/google`,"_blank","location=yes"):(0,E.Z)(`${C.baseURL}/auth/google`)},c=e=>Z(this,void 0,void 0,(function*(){t.value=!0,yield y.Z.user.changeAction(e).catch((()=>{t.value=!1})),i()})),u=()=>Z(this,void 0,void 0,(function*(){t.value=!0,yield e.dispatch(v.D.LOGOUT_USER).finally((()=>{t.value=!1})),yield n.push({name:w.n.LOGIN}),e.commit(f.F.SET_ACCESS_TOKEN,""),e.commit(k.N.SET_LESSONS,[])})),d=()=>Z(this,void 0,void 0,(function*(){s.length||(yield e.dispatch(S.e.FETCH_LESSONS),e.state.lesson.lessons.length)?a.value=!0:i()})),r={name:w.n.LESSONS};return{user:l,logout:u,login:d,isLoading:t,lessonsRoute:r,showHasLessonsModal:a,changeAction:c}}});var U=o(4260),W=o(4379),b=o(2452),H=o(6818),O=o(151),x=o(5589),A=o(677),D=o(7518),N=o.n(D);const Q=(0,U.Z)(q,[["render",p]]),R=Q;N()(q,"components",{QPage:W.Z,QBtn:b.Z,QDialog:H.Z,QCard:O.Z,QCardSection:x.Z}),N()(q,"directives",{ClosePopup:A.Z})}}]);