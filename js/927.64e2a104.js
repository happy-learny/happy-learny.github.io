"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[927],{8927:(e,n,l)=>{l.r(n),l.d(n,{default:()=>Q});var o=l(3673),t=l(2323);const a={class:"text-h6"},s=(0,o.Uk)(" К урокам "),i={key:0},c=(0,o.Uk)(" Выйти "),u=(0,o._)("div",{class:"text-h6"}," войти через ",-1),d=(0,o.Uk)(" гугл "),r=(0,o.Uk)(" Что сделать с материалом, созданным в гостевом аккаунте? "),g={class:"q-gutter-lg q-pa-lg"};function h(e,n,l,h,p,m){const f=(0,o.up)("q-btn"),v=(0,o.up)("q-page"),w=(0,o.up)("q-card-section"),_=(0,o.up)("q-card"),S=(0,o.up)("q-dialog"),k=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(v,{class:"column items-center q-pa-lg q-col-gutter-lg"},{default:(0,o.w5)((()=>[(0,o._)("div",a," Привет, "+(0,t.zw)(e.user.name),1),(0,o._)("div",null,[(0,o.Wm)(f,{to:e.lessonsRoute},{default:(0,o.w5)((()=>[s])),_:1},8,["to"])]),e.user.socialId?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(f,{loading:e.isLoading,onClick:e.logout},{default:(0,o.w5)((()=>[c])),_:1},8,["loading","onClick"])])):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[u,(0,o._)("div",null,[(0,o.Wm)(f,{loading:e.isLoading,onClick:e.login},{default:(0,o.w5)((()=>[d])),_:1},8,["loading","onClick"])])],64))])),_:1}),(0,o.Wm)(S,{modelValue:e.showHasLessonsModal,"onUpdate:modelValue":n[2]||(n[2]=n=>e.showHasLessonsModal=n)},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"column"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"text-h6 q-pa-lg"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o._)("div",g,[(0,o.wy)((0,o.Wm)(f,{label:"Отмена"},null,512),[[k]]),(0,o.wy)((0,o.Wm)(f,{label:"Перенести",color:"secondary",onClick:n[0]||(n[0]=n=>e.changeAction("replace"))},null,512),[[k]]),(0,o.wy)((0,o.Wm)(f,{label:"Удалить",color:"red",onClick:n[1]||(n[1]=n=>e.changeAction("delete"))},null,512),[[k]])])])),_:1})])),_:1},8,["modelValue"])],64)}var p=l(1959),m=l(3863),f=l(829),v=l(238),w=l(9253),_=l(9582),S=l(9232),k=l(6912),C=l(2801),y=l(1768),L=function(e,n,l,o){function t(e){return e instanceof l?e:new l((function(n){n(e)}))}return new(l||(l=Promise))((function(l,a){function s(e){try{c(o.next(e))}catch(n){a(n)}}function i(e){try{c(o["throw"](e))}catch(n){a(n)}}function c(e){e.done?l(e.value):t(e.value).then(s,i)}c((o=o.apply(e,n||[])).next())}))};const E=(0,o.aZ)({name:"PageIndex",setup(){const e=(0,m.useStore)(),n=(0,_.tv)();e.dispatch(f.D.FETCH_USER);const l=(0,p.Fl)((()=>e.state.user)),o=(0,p.iH)(!1),t=(0,p.iH)(!1),{lessons:a}=e.state.lesson,s=()=>{window.location.href=`${y.baseURL}/auth/google`},i=e=>L(this,void 0,void 0,(function*(){o.value=!0,yield C.Z.user.changeAction(e).catch((()=>{o.value=!1})),s()})),c=()=>L(this,void 0,void 0,(function*(){o.value=!0,yield e.dispatch(f.D.LOGOUT_USER).finally((()=>{o.value=!1})),yield n.push({name:w.n.LOGIN}),e.commit(v.F.SET_ACCESS_TOKEN,""),e.commit(S.N.SET_LESSONS,[])})),u=()=>L(this,void 0,void 0,(function*(){a.length||(yield e.dispatch(k.e.FETCH_LESSONS),e.state.lesson.lessons.length)?t.value=!0:s()})),d={name:w.n.LESSONS};return{user:l,logout:c,login:u,isLoading:o,lessonsRoute:d,showHasLessonsModal:t,changeAction:i}}});var q=l(4260),W=l(4379),H=l(2452),U=l(6818),Z=l(151),b=l(5589),O=l(677),x=l(7518),D=l.n(x);const N=(0,q.Z)(E,[["render",h]]),Q=N;D()(E,"components",{QPage:W.Z,QBtn:H.Z,QDialog:U.Z,QCard:Z.Z,QCardSection:b.Z}),D()(E,"directives",{ClosePopup:O.Z})}}]);